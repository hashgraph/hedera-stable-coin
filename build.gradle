plugins {
    id 'java'
    id 'application'
	id "idea"
	id 'com.github.johnrengelman.shadow' version '6.0.0'
	id "com.github.ben-manes.versions" version "0.29.0"
	id "com.google.protobuf" version "0.8.12"
}

sourceCompatibility = 14
targetCompatibility = 14

repositories {
    jcenter()
}

dependencies {
    implementation 'com.google.guava:guava:29.0-jre'
    implementation 'com.hedera.hashgraph:sdk:2.0.0-beta.2'
	implementation "com.google.protobuf:protobuf-javalite:3.12.4"
	implementation 'io.github.cdimascio:java-dotenv:5.2.1'
	implementation 'io.grpc:grpc-netty-shaded:1.30.2'

    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2'

    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.2'
}

protobuf {
	generatedFilesBaseDir = "$projectDir/gen"
	protoc {
		artifact = "com.google.protobuf:protoc:3.12.4"
	}
	generateProtoTasks {
		all().each { task ->
			task.builtins {
				java {
					option "lite"
				}
			}
		}
	}
}

application {
    mainClassName = 'com.hedera.hashgraph.stablecoin.App'
}

jar {
	manifest {
		attributes 'Main-Class': 'com.hedera.hashgraph.stablecoin.App'
	}
}

clean {
	delete protobuf.generatedFilesBaseDir
}

test {
    useJUnitPlatform()
}
